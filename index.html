<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Chase Game</title>
<style>
body {
  background: #5c1a2b;
  font-family: monospace;
  text-align: center;
  color: #4a0015;
}
#screen {
  background: #ff9bb3;
  border: 12px solid #4a0015;
  width: 320px;
  margin: 20px auto;
  padding: 10px;
  position: relative;
}
canvas {
  background: #ff9bb3;
  display: block;
  margin: auto;
}
.controls button {
  font-size: 20px;
  padding: 12px;
  margin: 4px;
  background: #ff6f91;
  border: 2px solid #4a0015;
  color: #4a0015;
  border-radius: 4px;
}
#startScreen {
  position: absolute;
  top:0; left:0;
  width: 100%; height: 100%;
  background: #ff9bb3;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color:#4a0015;
  font-family: monospace;
}
#startScreen button {
  font-size: 20px;
  padding: 10px 20px;
  margin-top: 20px;
  background: #FF6F91;
  border: 2px solid #4a0015;
  color: #4a0015;
  border-radius: 4px;
}
</style>
</head>
<body>

<h2>Valentine Chase Game</h2>
<div id="screen">
  <div>Score: <span id="score">0</span> | Lives: <span id="lives">3</span></div>
  <canvas id="game" width="320" height="640"></canvas>

  <div id="startScreen">
    <div>Hi baby, let's put your Pac-Man skills to the test.<br>
    See you on the other side.<br>
    Hit START to play</div>
    <button onclick="startGame()">START</button>
  </div>
</div>

<div class="controls">
  <div><button onclick="setDirection(0,-1)">▲</button></div>
  <div>
    <button onclick="setDirection(-1,0)">◀</button>
    <button onclick="setDirection(1,0)">▶</button>
  </div>
  <div><button onclick="setDirection(0,1)">▼</button></div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreEl = document.getElementById("score");
const livesEl = document.getElementById("lives");
const startScreen = document.getElementById("startScreen");
const grid = 16;

// Game variables
let score = 0;
let lives = 3;
let player = {x:10, y:10, dx:0, dy:0, px:10*grid, py:10*grid};
let beatFrame = 0;
let mouthOpen = true;
let gameInterval;

// Hearts
let hearts = [];

// Ghost enemies with smooth positions
let ghosts = [];

// Sparkles
let sparkles = [];

// Audio context
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

// Chomp / collect sounds
function beep(freq=300,dur=0.1){
  const o=audioCtx.createOscillator();
  o.frequency.value=freq;
  o.connect(audioCtx.destination);
  o.start();
  o.stop(audioCtx.currentTime+dur);
}

// Draw red pixel heart pellet
function drawHeart(x,y){
  const px = x*grid;
  const py = y*grid;
  const size = 2 + Math.sin(beatFrame/5)*1;
  const sprite=[
    [0,1,1,0,1,1,0],
    [1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1],
    [0,1,1,1,1,1,0],
    [0,0,1,1,1,0,0],
    [0,0,0,1,0,0,0]
  ];
  ctx.fillStyle="red";
  for(let r=0;r<sprite.length;r++){
    for(let c=0;c<sprite[r].length;c++){
      if(sprite[r][c]) ctx.fillRect(px+c*size, py+r*size, size, size);
    }
  }
}

// Draw everything
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Hearts
  hearts.forEach(h => drawHeart(h.x,h.y));

  // Player Pac-Man circle with mouth animation
  const px = player.px + grid/2;
  const py = player.py + grid/2;
  const mouthAngle = mouthOpen ? 0.25*Math.PI : 0;
  ctx.fillStyle="yellow";
  ctx.beginPath();
  ctx.moveTo(px,py);
  ctx.arc(px,py,7, mouthAngle, Math.PI*2-mouthAngle);
  ctx.closePath();
  ctx.fill();
  mouthOpen = !mouthOpen;

  // Ghosts
  ghosts.forEach(g=>{
    ctx.fillStyle=g.color;
    ctx.fillRec
